Redisë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤ê³ ëŠ” ì•Œê³  ìˆì—ˆì§€ë§Œ í¬ê²Œ ë‹¤ë£° ì¼ì´ ì—†ì—ˆì–´ì„œ ì ë‹¹í•˜ê²Œ íŠ¹ì§•ì— ëŒ€í•´ì„œë§Œ ì¸ì§€í•˜ê³  ìˆì—ˆë‹¤.
í•˜ì§€ë§Œ, í”„ë¡œì íŠ¸ì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒí•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì´ ìƒê²¨ ì†ë„ì— ëŒ€í•œ ê³ ë¯¼ì´ ìƒê²¼ê³ , Redisë¥¼ ë„ì…í•˜ì—¬ í•´ê²°í•´ë³´ìê³  ê²°ì •í•˜ì˜€ê³ , ì´ë ‡ê²Œ ì •ë¦¬ë¥¼ í•´ë³´ê³ ì í•œë‹¤.

# [Redis](https://redis.io/docs/)
**RE**mote **DI**ctionary **S**erver
> _Dictionaryë€, Key-value í˜•íƒœì˜ ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìë£Œêµ¬ì¡°_

Redisì— ëŒ€í•´ ì§ì—­í•˜ìë©´, ì›ê²©ì—ì„œ Key-Value í˜•íƒœì˜ ê°’ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì„œë²„ì´ë‹¤.
ì¶”ê°€ë¡œ, RedisëŠ” ë©”ëª¨ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ì—¬ DBì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì— ë¹„í•´ ìƒë‹¹íˆ ë¹ ë¥¸ ì„±ëŠ¥ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.



ê·¸ë ‡ë‹¤ë©´, ì™œ DBì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒë³´ë‹¤ ì†ë„ë¥¼ ê¸°ëŒ€í•  ìˆ˜ ìˆì„ê¹Œ?
ë©”ëª¨ë¦¬ ê³„ì¸µ êµ¬ì¡°ì™€ ê´€ë ¨ì´ ìˆëŠ”ë°, ì•„ë˜ ì‚¬ì§„ì„ ì°¸ê³ í•´ë³´ì

### ë©”ëª¨ë¦¬ ê³„ì¸µ êµ¬ì¡°
![](https://velog.velcdn.com/images/roycewon/post/e90a071e-3e61-48f6-b3b9-e18b9ef34b06/image.png)

ì£¼ ë©”ëª¨ë¦¬ (RAM)ì´ Persistent Storage(Disk)ë³´ë‹¤ Latencyê°€ ë‚®ê³  ìš©ëŸ‰ì€ ì ë‹¤ëŠ” íŠ¹ì§•ì´ ìˆë‹¤. ì†ë„ì˜ ì°¨ì´ëŠ” ì†Œì¬ë‚˜ ìš©ëŸ‰, ì„¤ê³„ ë“±ì— ì˜í•´ ë°œìƒí•˜ëŠ”ë° ê°„ë‹¨í•˜ê²Œ ì‚¬ì§„ìœ¼ë¡œ ì´í•´í•˜ê³  ë„˜ì–´ê°€ì.
[ê¶ê¸ˆí•˜ë©´](https://quasarzone.com/bbs/qf_cmr/views/343277)

ê²°ë¡ ì ìœ¼ë¡ , ë©”ëª¨ë¦¬ ê³„ì¸µ êµ¬ì¡°ë¥¼ ì´í•´í•˜ê³  ë‚˜ë©´ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì†ë„ê°€ ë” ë¹ ë¥´ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì¶”ê°€ë¡œ ë©”ëª¨ë¦¬ëŠ” íœ˜ë°œì„±ì´ë¼ëŠ” ì ë„ ì•Œê³  ë„˜ì–´ê°€ì.


# Redis íŠ¹ì§•
### key-value
RedisëŠ” key-value ë°ì´í„° ì €ì¥ì†Œì´ë‹¤. Javaì—ì„œì˜ Mapê³¼ ìœ ì‚¬í•œë°, Mapìë£Œêµ¬ì¡°ì˜ ì¥ì ê³¼ ë™ì¼í•˜ë‹¤. ë°ì´í„°ë¥¼ ì½ê³  ì“°ëŠ” ì†ë„ê°€ ë¹ ë¥´ë‹¤ëŠ” ê²ƒì´ë‹¤.


### ì—¬ëŸ¬ ë°ì´í„°íƒ€ì… ì œê³µ
![](https://velog.velcdn.com/images/roycewon/post/062d9400-e941-4925-ad7f-ab011685bffa/image.png)


key-valueì˜ value íƒ€ì…ì— ëŒ€í•´ ë‹¤ì–‘í•˜ê²Œ ì œê³µì´ ëœë‹¤. ê°„ë‹¨í•˜ê²Œ Stringë¶€í„° Collectionì¸ List, Set, ì‹¬ì§€ì–´ Sorted set ê¹Œì§€ ì œê³µí•˜ì—¬ ìƒí™©ì— ë§ê²Œ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤.

> 1. #### String
> ì¼ë°˜ì ì¸ ë¬¸ìì—´ë¡œ ìµœëŒ€ 512MB ê¸¸ì´ê¹Œì§€ ì§€ì›í•œë‹¤. Text ë¬¸ìì—´ë¿ë§Œ ì•„ë‹ˆë¼ Integerì™€ ê°™ì€ ìˆ«ìë‚˜ JPEG ê°™ì€ Binary Fileê¹Œì§€ ì €ì¥í•  ìˆ˜ ìˆë‹¤ê³  í•œë‹¤.

>2. #### Set
>Redisì—ì„œ ì œê³µí•˜ëŠ” `Set`ì€ `Set<String>`ì´ë‹¤. (ë¬¸ìì—´ Set) ì¼ë°˜ì ì¸ `Set`ìë£Œêµ¬ì¡°ì™€ ë™ì¼í•˜ê²Œ ì¤‘ë³µì€ ì €ì¥ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.

>3. #### Sorted Set
>`Set`ì— ê°€ì¤‘ì¹˜ê°€ ì¡´ì¬í•˜ì—¬ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ë‚´ë¶€ê°€ ì •ë ¬ë˜ì–´ ìˆë‹¤.

> 4. #### Hashes
> value ë‚´ì— `{field/string : value}` ìŒìœ¼ë¡œ ì´ë£¨ì–´ì§„ í…Œì´ë¸”ì„ ì €ì¥í•˜ëŠ” êµ¬ì¡°.

> 5. #### List
> `List<String>` (ë¬¸ìì—´ List) ì´ë©° `List` ìë£Œêµ¬ì¡°ë³´ë‹¨ `Deque`ì™€ ë¹„ìŠ·í•˜ë‹¤. Listì˜ ì•, ë’¤ì—ì„œ pushì™€ pop ì—°ì‚°ì„ ì œê³µí•œë‹¤

ë‹¤ì–‘í•œ ë°ì´í„° íƒ€ì…(Collection) ì œê³µì€ ê°œë°œì˜ í¸ì˜ì„±ê³¼ ë‚œì´ë„ì—ì„œ ì´ì ì„ ê¸°ëŒ€í•  ìˆ˜ ìˆë‹¤.

ê°„ë‹¨í•˜ê²Œ, ìºì‹œë‚˜ ì„¸ì…˜ ê°’(`String`)ì„ ì €ì¥í•˜ê±°ë‚˜ ì‹¤ì‹œê°„ ë­í‚¹ì„ êµ¬í•´ì•¼ í•˜ëŠ” ê¸°ëŠ¥ì—ì„  `Sorted Set`ì„ ì‚¬ìš©í•˜ë©´ êµ‰ì¥íˆ í¸ë¦¬í•˜ë‹¤.

### Single Threaded
RedisëŠ” ì‹±ê¸€ì“°ë ˆë“œë¡œ ë™ì‘í•œë‹¤. ë‹¹ì—°í•˜ê²Œë„, Atomicí•˜ì—¬ Race conditionì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŸ¬í•œ ì´ìœ ê°€ ì—¬ëŸ¬ ì„œë²„ì—ì„œ ê°™ì€ ë°ì´í„°ë¥¼ ê³µìœ í•˜ê³  ë³´ê³ ì‹¶ì„ ë•Œ  Redisë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ” ì´ìœ ê°€ ë  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤. 
(ì¸ì¦ í† í° ì €ì¥, API limit ë“±ë“±)

í•˜ì§€ë§Œ ì´ íŠ¹ì§•ì€ ì„±ëŠ¥ ë¶€ë¶„ì— ëŒ€í•´ì„œ ì‹ ê²½ì„ ì¨ì•¼í•˜ëŠ”ë°, ì‹œê°„ ë³µì¡ë„ $O(n)$, í˜¹ì€ ê·¸ ì´ìƒ ìŠ¤ì¼€ì¼ì˜ ëª…ë ¹ì€ ì§€ì–‘í•´ì•¼ í•œë‹¤. í•´ë‹¹ ì—°ì‚°ì— ë¶™ì¡í˜€ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ê°€ ì²˜ë¦¬ë˜ì§€ ì•Šê³  ìŒ“ì´ê¸° ë•Œë¬¸ì´ë‹¤.
![](https://velog.velcdn.com/images/roycewon/post/4b47235b-b5ae-49a6-8c83-c8b691aeba2b/image.png)



### Persistence(Diskì— ì €ì¥ì´ ê°€ëŠ¥í•˜ë©´ì„œ ìƒê¸´ ì˜ì†ì„±)
RedisëŠ” ë©”ëª¨ë¦¬ì—ì„œ ë™ì‘í•˜ì—¬ ë°ì´í„° ì €ì¥ì†Œë¡œ ì‚¬ìš©í•´ë„ ê´œì°®ì„ê¹Œ ê³ ë¯¼í•  ìˆ˜ ìˆë‹¤. ë‹¤í–‰íˆë„, redisëŠ” diskì— ì €ì¥í•˜ì—¬ ì˜ì†ì„±ì„ ì œê³µí•´ì¤€ë‹¤. redisì˜ ë°ì´í„°ë¥¼ diskì— ì €ì¥í•˜ëŠ” ë°©ì‹ì€ snapshot, AOF ë°©ì‹ì´ ìˆë‹¤ê³  í•œë‹¤.

> RDB : íŠ¹ì • ì‹œì ì˜ ë°ì´í„°ë¥¼ DISKì— ì˜®ê²¨ë‹´ëŠ” ë°©ì‹ (Redis forkë¡œ ìˆ˜í–‰)

> AOF : Redisì˜ ëª¨ë“  write/update ì—°ì‚° ìì²´ë¥¼ ëª¨ë‘ log íŒŒì¼ì— ê¸°ë¡í•œ ë’¤, ì„œë²„ê°€ ì¬ì‹œì‘í•  ë•Œ ë¡œê·¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³µêµ¬

>[The most important thing to understand is the different trade-offs between the RDB and AOF persistence.](https://redis.io/docs/manual/persistence/)

<br>

# Cacheë¡œ ì‚¬ìš©
ë‹¤ì‹œ ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ì„œ, Redisë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í•œ ì´ìœ ì— ì§‘ì¤‘ í•´ë³´ì.
> #### "ì‹¤ì‹œê°„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì¡°íšŒ"

í´ë¦­ í•œ ë²ˆì˜ API í˜¸ì¶œì— ë¹„í•´ êµ‰ì¥íˆ ë§ì€ ìš”ì²­ í˜¹ì€ DBì ‘ê·¼ì´ ë°œìƒí•  ê²ƒìœ¼ë¡œ ì˜ˆìƒì´ ë˜ì—ˆë‹¤. In-Memoryë¡œ ë™ì‘í•˜ëŠ” Redisì˜ ì‚¬ìš© ì´ë‰´ëŠ” DB ì ‘ê·¼ì„ ì¤„ì—¬ ì†ë„ í–¥ìƒì„ ê¸°ëŒ€í•œë‹¤ëŠ” ê²ƒì´ë‹¤.
ê·¸ëŸ¼ ì–´ë–»ê²Œ..??

DBì— ëŒ€í•œ Cacheì²˜ëŸ¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. ê°„ë‹¨í•˜ê²Œ, CacheëŠ” ìš”ì²­ëœ ê²°ê³¼ë¥¼ ë¯¸ë¦¬ ì €ì¥í•´ë‘ì—ˆë‹¤ê°€ ë‹¤ì‹œ ìš”ì²­í•  ë•Œ, ë¹¨ë¦¬ ì œê³µí•˜ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê°œë…ì´ë‹¤. ì´ë¥¼ ì°¨ìš©í•´ì„œ, DBì— ëŒ€í•œ ì •ë³´ë¥¼ Redisì— ìºì‹±í•´ ë‘ëŠ” ê²ƒì´ë‹¤. DBë³´ë‹¤ëŠ” ìš©ëŸ‰(Capacity)ëŠ” ì ë‹¤ëŠ” ì ë„ ê³ ë ¤í•˜ì.

ì´ë ‡ê²Œ ìºì‹±í•˜ëŠ” ê²ƒë„ ë‘ê°€ì§€ ì „ëµì´ ìˆë‹¤ê³  í•œë‹¤.
### 1. Look aside cache (Lazy Loading)

1.  ì›¹ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°›ì•„ì„œ, ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ ìºì‹œë¥¼ **ë¨¼ì €** í™•ì¸
2. Cacheì— ë°ì´í„°ê°€ ìˆìœ¼ë©´ ê·¸ê±¸ êº¼ë‚´ì£¼ëŠ”ë°, ë§Œì•½ ì—†ìœ¼ë©´
3. DBì—ì„œ ì½ì–´ì„œ -> ë¨¼ì € ìºì‹œì— ì €ì¥í•œë‹¤ìŒ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°ì´í„°ë¥¼ ëŒë ¤ì¤Œ

ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë¨

### 2. Write Back
1. Dataë¥¼ Cacheì— ì €ì¥
2. Cacheì— ìˆëŠ” Dataë¥¼ ì¼ì • ê¸°ê°„ë™ì•ˆ Check
3. ëª¨ì—¬ìˆëŠ” Dataë¥¼ DBì— ì €ì¥
4. Cacheì— ìˆëŠ” Data ì‚­ì œ

ë°ì´í„°ë¥¼ ìºì‹œì— ì „ë¶€ ì €ì¥í•´ë†“ì•˜ë‹¤ê°€ íŠ¹ì • ì‹œì ë§ˆë‹¤ í•œë²ˆì‹ ìºì‹œ ë‚´ ë°ì´í„°ë¥¼ DBì— insertí•˜ëŠ” ë°©ë²•ì´ë‹¤.

# ì •ë¦¬
Redisì— ëŒ€í•œ ì¼ë°˜ì ì¸ ê°œë…ë“¤ì— ëŒ€í•´ ì‚´í´ë³´ì•˜ë‹¤. íŠ¹ì§•ë“¤ì„ íŒŒì•…í•´ ë³´ë‹ˆ, Redisë¥¼ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë¬¸ì œê°€ ë§ì„ ê²ƒ ê°™ë‹¤. (ì†ë„, ê³µìœ , ë™ì‹œì„± ê´€ë ¨) ë” ë‚˜ì•„ê°€ Redisë¥¼ ì—¬ëŸ¬ê°œ ìš´ì˜í•˜ê±°ë‚˜ ë³µì œí•˜ì—¬ ë¬¸ì œì— ëŒ€ë¹„í•˜ëŠ” ë“±, ì•„í‚¤í…ì³ì— ëŒ€í•œ ì •ë³´ë„ ë§ë”ë¼.

ì§ì ‘ ì‚¬ìš©í•´ë³´ë©´ì„œ ìµíˆë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

> ì°¸ê³ 
> ê³µì‹ ë¬¸ì„œ : https://redis.io/docs/
> @swhan9404 : [Redis ë€ ë¬´ì—‡ì¸ê°€?](https://velog.io/@swhan9404/Redis-%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80)
> @hyeondev : [Redis ë€ ë¬´ì—‡ì¼ê¹Œ?](https://velog.io/@hyeondev/Redis-%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%BC%EA%B9%8C#redis-cluster)
> [ìš°ì•„í•œ ë ˆë””ìŠ¤](https://www.youtube.com/watch?v=mPB2CZiAkKM)
> [[10ë¶„ í…Œì½”í†¡] ğŸ¤”ë””ë””ì˜ Redis](https://www.youtube.com/watch?v=Gimv7hroM8A)