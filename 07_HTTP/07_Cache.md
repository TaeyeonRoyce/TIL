# 캐시

자주 들어가는 웹페이지에 대해서 매 방문마다 모든 웹 페이지 요소(사진, 동영상 등등)를 응답 받는다면, 비효율적이라는 고민을 할 수 있을 것이다. 이러한 고민으로 캐시라는 개념이 등장했다.

느리고 비싼 인터넷 네트워크를 매번 이용하는 것 보단 로컬 저장소에 저장하여 매 방문마다 사용한다는 개념이다.



### 캐시 vs 쿠키

응답 정보를 미리 로컬에 저장한다는 점은 비슷하지만 그 역할이 다르다.

> 캐시는 웹 페이지 요소를 저장
>
> 쿠키는 사용자의 상태를 저장

>캐시의 목적은 웹페이지의 빠른 렌더링
>
>쿠키는 사용자의 인증과 요청의 상태를 알림

>캐시 : ex) 오디오, 비디오, 이미지
>
> 쿠키 : ex) 로그인 정보, 방문기록, 방문 횟수



### 검증 헤더

캐시는 유효수명이 있다.

하지만, 캐시의 유효수명이 지난다고 해서 쿠키처럼 삭제가 되진 않는다. 응답받는 정보가 동일하다면 캐시가 만료되었다는 이유로 또 다시 캐시를 포함한 비용의 네트워킹이 필요하다.

이처럼, 동일한 데이터에 대해선 만료되었더라도 캐시를 다운받는 것은 비효율적이다. 검증 헤더를 통해 만료된 캐시더라도 동일한 데이터임을 확인받아 불필요한 네트워킹을 줄일 수 있다.

- 응답 헤더의 `Last-Modified`

  요청 헤더의 `if-modified-since` 를 통해 서버측에서 데이터 수정 요소를 확인.

  => 서버가 304 Status-code를 보냄 (Not-Modified)

  

- 응답 헤더의 `ETag`

  캐시용 데이터의 버전 이름

  요청 헤더의 `If-None-Match`를 통해 서버측에서 데이터 수정 요소를 확인

### 캐시 제어 헤더

- Cache-Control : 캐시 제어

  > max-age : 캐시 유효 시간
  >
  > no-cache : 항상 origin서버에 검증하고 사용
  >
  > no-store : 저장을 안하는 캐시 (개인정보 등)



